<script>
	import { onMount } from 'svelte';
	
	let mounted = false;
	let domLoaded = false;
	let timeoutExecuted = false;
	
	console.log('ğŸš€ æµ‹è¯•å¼€å§‹');
	
	// æ£€æŸ¥ DOM æ˜¯å¦å·²åŠ è½½
	if (typeof document !== 'undefined') {
		console.log('ğŸ“„ document å­˜åœ¨');
		domLoaded = true;
		
		// ä½¿ç”¨åŸç”Ÿ DOM äº‹ä»¶
		if (document.readyState === 'loading') {
			document.addEventListener('DOMContentLoaded', () => {
				console.log('ğŸ“„ DOMContentLoaded äº‹ä»¶è§¦å‘');
			});
		} else {
			console.log('ğŸ“„ DOM å·²å°±ç»ª');
		}
	}
	
	// ä½¿ç”¨ setTimeout ä½œä¸ºå¤‡ç”¨æ–¹æ¡ˆ
	setTimeout(() => {
		console.log('â° setTimeout æ‰§è¡Œ');
		timeoutExecuted = true;
		
		// å¦‚æœ onMount æ²¡æœ‰æ‰§è¡Œï¼Œè¿™é‡Œæ‰‹åŠ¨è®¾ç½®
		if (!mounted) {
			console.log('âš ï¸ onMount æœªæ‰§è¡Œï¼Œä½¿ç”¨ setTimeout ä½œä¸ºå¤‡ç”¨');
			mounted = true;
		}
	}, 100);
	
	onMount(() => {
		console.log('âœ… onMount æ‰§è¡ŒæˆåŠŸï¼ï¼ï¼');
		mounted = true;
	});
	
	console.log('ğŸš€ æµ‹è¯•ç»“æŸ');
</script>

<h1>è°ƒè¯•æµ‹è¯•é¡µé¢</h1>
<div>
	<p><strong>DOM å·²åŠ è½½:</strong> {domLoaded}</p>
	<p><strong>setTimeout å·²æ‰§è¡Œ:</strong> {timeoutExecuted}</p>
	<p><strong>onMount å·²æ‰§è¡Œ:</strong> <span style="color: {mounted ? 'green' : 'red'}; font-weight: bold;">{mounted}</span></p>
</div>

<style>
	h1 { color: #333; }
	div { padding: 20px; border: 1px solid #ccc; margin: 20px; }
</style>
